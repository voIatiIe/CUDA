Задание 2. За основу можно взять уже настроенную библиотеку DevIL http://alex-freenas.ddns.net:3000/Alexander_KS/CUDA_practice . Для того, чтобы основная программа собралась, необходимо разархивировать  DevIL-1.8.0.zip и скопировать его на кластер с полюсом, затем с помощью cmake собрать его. Если будут какие то проблемы, то их надо решить как можно быстрее, так как иначе будет проблема с выполнением этого задания. Возможно, придется собрать cmake на полюсе из исходников. 

Далее из этой статьи можно узнать, что такое свертки и фильтрация изображений https://habr.com/ru/articles/142818/ . Из нее нужно выбрать один фильтр, который в дальнейшем будет реализован в качестве второго задания. Размер фильтра должен быть параметром программы. 

Далее все аналогично заданию 1 - последовательная версия на ЦПУ, сравнение результатов выполнения ЦПУ/ГПУ, а также скорости выполнения фильтрации. Это базовая часть задания 2. 

Расширенная часть - реализовать использование cudaStrams в рамках трех каналов R/G/B - то есть обрабатывать три канала параллельно в разных стримах. Также добавить возможность обработки фильтрации на 2х ГПУ, которые доступны в узле. Корректность выполнения проверяется с последовательной версией на ЦПУ. Также корректность можно оценить и по выходной картинке. Если что то упустил, то будет уточнено в ближайшее время.


1) Unzip DevIL archive
2) Execute steps from DevIL/DevIL/README.cmake
2.1) Use built cmake from /home/kolganov.a/DVM/cmake-3.24.2/bin/cmake
2.2) Execute "/home/kolganov.a/DVM/cmake-3.24.2/bin/cmake -S .. -B ." from build directory
2.3) Move *.so files from ./DevIL/DevIL/build/lib/x64/ to ./lib/
3) Add path ./DevIL/DevIL/build/lib/x64/ or ./lib/ to LD_LIBRARY_PATH
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/polusfs/lsf/10.1/linux3.10-glibc2.17-ppc64le/lib:/usr/local/cuda-10.2/lib64:/home_edu/edu-cmc-sqi20/edu-cmc-sqi20-28/CUDA/Task_2/lib/
4) make


bsub -n 1 -m polus-c2-ib.bmc.hpc.cs.msu.ru -e error -o output -gpu - ./filtering 15

Реализована версия с обработкой каждого канала в отдельном стриме
За границами точки берутся зеркально относительно границы

1) Фильтр - BlurBox (матрица единиц)
2) Радиус = 0 соответствует отсутствию фильтра, радиус = 1 - бокс 3х3 и т.д.
3) Картинка с радиусом бокса = 15 - result.bmp
4) Результаты выполнения лежат в файле output
